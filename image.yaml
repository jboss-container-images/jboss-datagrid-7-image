schema_version: 1

name: "jboss-datagrid-7/datagrid72"
description: "Red Hat JBoss Data Grid 7.2 container image"
version: "7.2.0"
from: "jboss/openjdk18-rhel7:1.2"
labels:
    - name: "org.jboss.product"
      value: "datagrid"
    - name: "org.jboss.product.version"
      value: "7.2.0.GA"
    - name: "org.jboss.product.datagrid.version"
      value: "7.2.0.GA"
    - name: "org.jboss.deployments-dir"
      value: "/opt/datagrid/standalone/deployments"
    - name: "com.redhat.deployments-dir"
      value: "/opt/datagrid/standalone/deployments"
    - name: "com.redhat.dev-mode"
      value: "DEBUG:true"
      description: "Environment variable used to enable development mode (debugging).  A value of true will enable development mode."
    - name: "com.redhat.dev-mode.port"
      value: "DEBUG_PORT:8787"
      description: "Environment variable used to specify the debug port.  If not set, the default EAP debug port will be used (8787).  Only applicable when development mode is enabled."
envs:
    - name: "LAUNCH_JBOSS_IN_BACKGROUND"
      value: "true"
    - name: "JBOSS_PRODUCT"
      value: "datagrid"
    - name: "JBOSS_DATAGRID_VERSION"
      value: "7.2.0.GA"
    - name: "PRODUCT_VERSION"
      value: "7.2.0.GA"
    - name: "JBOSS_HOME"
      value: "/opt/datagrid"
ports:
    - value: 8080
    - value: 8787
      expose: false
modules:
      repositories:
          - path: modules
      install:
          - name: datagrid
artifacts:
    # Uncomment this once we are at CR/Final phase
    # - path: jboss-datagrid-7.2.0-server.zip
    #   description: "Artifact is available on Customer Portal: https://access.redhat.com/jbossnetwork/restricted/softwareDetail.html?softwareId=50851&product=data.grid&version=&downloadType=distributions"
    #   md5: 411376fedbd0df3ed373ae56e0a69c3c
    - path: jboss-datagrid-7.2.0.ER3-server.zip
      description: "Development artifact. Will be replaced by CR or Final version soon. Commit SHA1: 434f41c"
      md5: de95c0bf255daea28aab344e9c59cbf4
run:
      user: 185
      cmd:
          - "/opt/datagrid/bin/standalone.sh"
          - "-b"
          - "0.0.0.0"
osbs:
      repository:
            name: jboss-datagrid-7-docker
            branch: jb-datagrid-7.2-rhel-7
